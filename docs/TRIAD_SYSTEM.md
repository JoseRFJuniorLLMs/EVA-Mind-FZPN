# Arquitetura Tr√≠ade: Esopo + Nasrudin + Zen

## üéØ A Tr√≠ade Completa da Psique

Sistema de interven√ß√£o terap√™utica com **tr√™s ferramentas complementares**:

1. **Esopo** ‚Üí Superego (Moral/Estrutura)
2. **Nasrudin** ‚Üí Inconsciente (Paradoxo/Desconstru√ß√£o)  
3. **Zen** ‚Üí Self/Vazio (Presen√ßa/Centramento)

---

## üìä Quatro Collections no Qdrant

### 1. `nasrudin_stories` (270 hist√≥rias)
- **Fun√ß√£o:** Quebrar rigidez, obsess√£o, t√©dio
- **M√©todo:** Paradoxo, absurdo, humor
- **Zeta Affinity:** Tipos Emocionais (2, 4, 7, 9)
- **Quando:** Nega√ß√£o, resist√™ncia, repeti√ß√£o compulsiva

### 2. `aesop_fables` (~300 f√°bulas)
- **Fun√ß√£o:** Ensinar causa-efeito, responsabilidade
- **M√©todo:** L√≥gica, moral, consequ√™ncia
- **Zeta Affinity:** Tipos Racionais (1, 3, 5, 6)
- **Quando:** Imprud√™ncia, racionaliza√ß√£o, busca de aten√ß√£o

### 3. `zen_koans` (~50 hist√≥rias)
- **Fun√ß√£o:** Esvaziar a mente, parar o pensamento
- **M√©todo:** Choque de insight, sil√™ncio
- **Zeta Affinity:** Tipos Anal√≠ticos/Introspectivos (1, 4, 5, 9)
- **Quando:** Overthinking, ansiedade mental, satura√ß√£o cognitiva

### 4. `somatic_exercises` (~20 exerc√≠cios)
- **Fun√ß√£o:** Aterramento, presen√ßa corporal
- **M√©todo:** Comandos som√°ticos diretos
- **Sintomas:** P√¢nico, dissocia√ß√£o, hiperventila√ß√£o
- **Quando:** Crise aguda, ansiedade f√≠sica

---

## üß† L√≥gica de Decis√£o Expandida

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Usu√°rio fala algo                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  TransNAR analisa (Lacan)                ‚îÇ
‚îÇ  - Detecta padr√£o cl√≠nico                ‚îÇ
‚îÇ  - Mede intensidade (0-1)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Zeta Router + Estado Fisiol√≥gico       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  DECIS√ÉO  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
    ‚ñº          ‚ñº          ‚ñº          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ESOPO  ‚îÇ ‚îÇNASRUDIN‚îÇ ‚îÇ ZEN  ‚îÇ ‚îÇSOMATIC  ‚îÇ
‚îÇ        ‚îÇ ‚îÇ        ‚îÇ ‚îÇKOAN  ‚îÇ ‚îÇEXERCISE ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
Racional   Emocional  Mental    F√≠sico
1,3,5,6    2,4,7,9    1,4,5,9   Crise
```

---

## üí° Exemplos Pr√°ticos

### Cen√°rio 1: Overthinking (Tipo 5 - Investigador)

**Fala:** *"Eu li tudo sobre minha doen√ßa, analisei os dados, mas n√£o entendo por que n√£o melhoro."*

**TransNAR detecta:** `intellectualization` (defesa excessiva)  
**Zeta Type:** 5 (Investigador - Anal√≠tico)  
**Estado:** Mental saturation  
**Sistema escolhe:** **ZEN KOAN** ‚Üí "Uma X√≠cara de Ch√°"

**EVA responde:**
> "Sua mente parece a x√≠cara de ch√° do mestre Nan-in. Ele tentava servir ch√° para um professor, mas a x√≠cara j√° estava cheia e transbordou. 'Como posso lhe mostrar o Zen', disse o mestre, 'se sua mente j√° est√° cheia de opini√µes?' Que tal pararmos de pensar por um minuto?"

---

### Cen√°rio 2: Crise de P√¢nico (Qualquer Tipo)

**Fala:** *"N√£o consigo respirar! Meu cora√ß√£o est√° acelerado! Vou morrer!"*

**TransNAR detecta:** `panic_attack` (fisiol√≥gico)  
**Sensores:** Frequ√™ncia card√≠aca 140 bpm  
**Sistema escolhe:** **SOMATIC EXERCISE** ‚Üí "Aten√ß√£o na Respira√ß√£o"

**EVA responde (voz calma, comando direto):**
> "Pare tudo agora. Feche os olhos. Sinta o ar entrando pelo nariz. Voc√™ est√° entrando com ele. Sinta o ar saindo. Voc√™ est√° saindo com ele. S√≥ isso. Nada mais."

*(EVA monitora frequ√™ncia card√≠aca em tempo real e ajusta dura√ß√£o do exerc√≠cio)*

---

### Cen√°rio 3: Racionaliza√ß√£o (Tipo 3 - Realizador)

**Fala:** *"Eu n√£o preciso de ajuda. Sempre fiz tudo sozinho."*

**TransNAR detecta:** `rationalization` + `projection`  
**Zeta Type:** 3 (Racional)  
**Sistema escolhe:** **ESOPO** ‚Üí "A Raposa e as Uvas"

*(J√° documentado anteriormente)*

---

### Cen√°rio 4: Depress√£o/T√©dio (Tipo 9 - Pacificador)

**Fala:** *"Nada faz sentido. Tudo √© sempre igual."*

**TransNAR detecta:** `learned_helplessness` + `apathy`  
**Zeta Type:** 9 (Emocional/Pacificador)  
**Sistema escolhe:** **NASRUDIN** ‚Üí "A Chave e a Luz"

*(J√° documentado anteriormente)*

---

## üîß Implementa√ß√£o Backend (Go)

```go
func (h *Handler) SelectIntervention(
    transnarResult map[string]interface{},
    zetaType int,
    vitalSigns VitalSigns,
) (*Intervention, error) {
    
    // PRIORIDADE 1: Crise F√≠sica (sobrep√µe tudo)
    if vitalSigns.HeartRate > 120 || vitalSigns.Panic {
        return h.somaticMatcher.FindExercise("panic_attack")
    }
    
    // PRIORIDADE 2: Satura√ß√£o Mental
    if transnarResult["defense"] == "intellectualization" {
        return h.zenMatcher.FindKoan("mental_saturation")
    }
    
    // PRIORIDADE 3: Roteamento Zeta Normal
    switch zetaType {
    case Type1, Type3, Type5, Type6:
        return h.aesopMatcher.FindFable(transnarResult)
        
    case Type2, Type4, Type7, Type9:
        return h.nasrudinMatcher.FindStory(transnarResult)
        
    default:
        return h.aesopMatcher.FindFable(transnarResult)
    }
}
```

---

## üì± Implementa√ß√£o Frontend (Flutter)

```dart
void _handleIntervention(Map<String, dynamic> data) {
  final type = data['intervention_type'];
  
  switch (type) {
    case 'didactic':  // Esopo
      _showMoralCard(data);
      break;
      
    case 'paradox':  // Nasrudin
      _showHumorCard(data);
      break;
      
    case 'zen_koan':  // Zen Narrativo
      _showZenCard(data);
      _playGongSound();  // Som de sino zen
      break;
      
    case 'somatic':  // Exerc√≠cio F√≠sico
      _startGuidedExercise(data);
      _showBreathingAnimation();  // Anima√ß√£o de respira√ß√£o
      _monitorVitals();  // Monitorar sinais vitais
      break;
  }
}
```

---

## üì¶ Schema Lacaniano (Exemplos)

### Zen Koan: "Uma X√≠cara de Ch√°"
```json
{
  "koan_id": "zen_001_xicara_cha",
  "title": "Uma X√≠cara de Ch√°",
  "text": "Nan-in serviu ch√°...",
  "clinical_tags": {
    "transnar_rule": "intellectualization",
    "target_state": "mental_saturation",
    "intervention_type": "shock_insight",
    "zeta_affinity": [1, 5, 6]
  },
  "trigger_condition": "User overthinks, cannot stop mental chatter",
  "eva_followup": "Sua mente est√° cheia como a x√≠cara..."
}
```

### Somatic Exercise: "Equil√≠brio"
```json
{
  "exercise_id": "somatic_001_equilibrio",
  "title": "Centraliza√ß√£o pelo Equil√≠brio",
  "instruction": "Fique em p√©. Sinta os dois p√©s...",
  "symptoms": ["panic_attack", "dizziness", "disassociation"],
  "action": "grounding",
  "duration_seconds": 60,
  "eva_voice_command": "Pare tudo. Fique em p√©..."
}
```

---

## üöÄ Execu√ß√£o no Servidor

```bash
# 1. Popular Nasrudin (270 hist√≥rias)
python3 scripts/populate_nasrudin_with_lacan.py

# 2. Popular Esopo (~300 f√°bulas)
python3 scripts/populate_aesop_fables.py

# 3. Popular Zen (koans + exerc√≠cios)
python3 scripts/populate_zen_content.py

# 4. Verificar todas collections
curl http://localhost:6333/collections | jq '.result.collections[].name'
```

---

## ‚úÖ Resultado Final: A Tr√≠ade Completa

| Ferramenta | Fun√ß√£o | Alvo | Zeta | Quando |
|------------|--------|------|------|--------|
| **Esopo** | Estruturar | Superego | 1,3,5,6 | Imprud√™ncia |
| **Nasrudin** | Desconstruir | Inconsciente | 2,4,7,9 | Rigidez |
| **Zen Koan** | Esvaziar | Mente | 1,4,5,9 | Overthinking |
| **Somatic** | Aterrar | Corpo | Todos | Crise F√≠sica |

**EVA agora √© um Mestre Zen Digital completo!** üßò‚Äç‚ôÄÔ∏è‚ú®
